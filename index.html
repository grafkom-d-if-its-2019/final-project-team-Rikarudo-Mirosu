<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>MAGEBULLET 0</title>
    <style>
        body {
            margin: 0;
        }
        
        canvas {
            width: 100%;
            height: 100%
        }
    </style>
</head>

<body>
    <script src="build/three.js"></script>
    <script src="build/Spawner.js"></script>
    <script src="build/bullet.js"></script>
    <script src="build/HitBox.js"></script>
    <script src="build/player.js"></script>
    <script>
        // bagian inisiasi objek
        var bullets = [];
        var enemy = [];
        var bulletEnemy = [];
        var frame = 0;
        var time = 0;

        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        var renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMapEnabled = true;
        document.body.appendChild(renderer.domElement);
        var geometry = new THREE.BoxGeometry(1, 1, 1);
        var material = new THREE.MeshBasicMaterial({
            color: 0xffff
        });
        var player1 = new Player();

        // bagian movement objek

        var yMovement = 0,
            xMovement = 0,
            delayshoot = 0;

        var LEFT = false,
            RIGHT = false,
            TOP = false,
            BOTTOM = false,
            SHOOT = false;
        //ini buat bikin camera
        
        camera.position.z = 15 //mode normal;
        //camera.position.z = 70 //mode mata elang;

        camera.position.y = -5;
        camera.position.x = 0;

        var planewidth = 40;
        var planeheight = 30;
        var plane_limitx = planewidth/2;
        var plane_limity = planeheight/2;

        //ini plane atau dataran dari gamenya.
        var geometry = new THREE.PlaneGeometry(planewidth, planeheight, 1, 1);
        var material = new THREE.MeshBasicMaterial({
            color: 0x2a2f59,
            side: THREE.DoubleSide
        });
        var plane = new THREE.Mesh(geometry, material);
        plane.position.z = 0;
        scene.add(plane);

        //penambahan camera because ofc
        scene.add(camera);

        camera.lookAt(plane.position);

        //contoh pembuatan instansi
        // var data = new Minions();
        // var data2 = new Boss();

    //     function coordinateCheck(){
    // // if(player.position.x >= plane_limitx || player.position.x <= -plane_limitx){

    // //     player.position.x = 0;
    // // }
    // // player.position.x = 0;
    // // player.position.y = -3;
    //   }

        function move(){
        
            player1.object.position.y += yMovement;
            
            if(player1.object.position.x == plane_limitx){

                player1.object.position.x = 0;
            }    
            player1.object.position.x += xMovement;
        }

        function animate() {
            
            //coordinateCheck();
            action();
            move();
            shoot();
            Hitbox();
            bulletcheck();
            moveEnemy();
            moveBullet();
            frame++;
            if (frame >= 60) {
                time++;
                enemySpawner();
                frame = 0;
            }
            //oh, perlu diketahui, apabila ingin membuat kelas dan ingin mengatur posisinya,
            // harus objek dari kelasnya yang di rombak
            
            
            
            //perhitungan delay shoot diberi biar tidak terjadi Unintentional Discharge / tiba tiba nembak sendiri!
            if (delayshoot < 6)
                delayshoot++;

            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>

</html>